.\tcagents\Scripts\python : Fa
iled to import MCPRetriever: N
o module named 'langchain_mcp_
adapters'
所在位置 行:1 字符: 1
+ .\tcagents\Scripts\python de
bug_chinese.py 2>&1 | Out-File
 -FilePath  ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : 
NotS    pecified: (Failed to i
mpor...n    _mcp_adapters':Str
ing) [], Rem    oteException
    + FullyQualifiedErrorId : 
Nati    veCommandError
 
D:\心宇未来\ai-teacher-nexus\tcage
nts\Lib\site-packages\gpt_rese
archer\config\config.py:26: Fu
tureWarning: EMBEDDING_PROVIDE
R is deprecated and will be re
moved soon. Use EMBEDDING inst
ead.
  self._handle_deprecated_attr
ibutes()
D:\心宇未来\ai-teacher-nexus\tcage
nts\Lib\site-packages\gpt_rese
archer\config\config.py:26: Fu
tureWarning: LLM_PROVIDER, FAS
T_LLM_MODEL and SMART_LLM_MODE
L are deprecated and will be r
emoved soon. Use FAST_LLM and 
SMART_LLM instead.
  self._handle_deprecated_attr
ibutes()
Traceback (most recent call la
st):
  File "D:\心宇未来\ai-teacher-nex
us\tcagents\Lib\site-packages\
gpt_researcher\actions\agent_c
reator.py", line 34, in choose
_agent
    response = await create_ch
at_completion(
               ^^^^^^^^^^^^^^^
^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "D:\心宇未来\ai-teacher-nex
us\tcagents\Lib\site-packages\
gpt_researcher\utils\llm.py", 
line 84, in create_chat_comple
tion
    response = await provider.
get_chat_response(
               ^^^^^^^^^^^^^^^
^^^^^^^^^^^^^^^^^^
        messages, stream, webs
ocket, **kwargs
        ^^^^^^^^^^^^^^^^^^^^^^
^^^^^^^^^^^^^^^
    )
    ^
  File "D:\心宇未来\ai-teacher-nex
us\tcagents\Lib\site-packages\
gpt_researcher\llm_provider\ge
neric\base.py", line 259, in g
et_chat_response
    output = await self.llm.ai
nvoke(messages, **kwargs)
             ^^^^^^^^^^^^^^^^^
^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\心宇未来\ai-teacher-nex
us\tcagents\Lib\site-packages\
langchain_core\language_models
\chat_models.py", line 421, in
 ainvoke
    llm_result = await self.ag
enerate_prompt(
                 ^^^^^^^^^^^^^
^^^^^^^^^^^^^^^
    ...<8 lines>...
    )
    ^
  File "D:\心宇未来\ai-teacher-nex
us\tcagents\Lib\site-packages\
langchain_core\language_models
\chat_models.py", line 1128, i
n agenerate_prompt
    return await self.agenerat
e(
           ^^^^^^^^^^^^^^^^^^^
^^
        prompt_messages, stop=
stop, callbacks=callbacks, **k
wargs
        ^^^^^^^^^^^^^^^^^^^^^^
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
^^^^^
    )
    ^
  File "D:\心宇未来\ai-teacher-nex
us\tcagents\Lib\site-packages\
langchain_core\language_models
\chat_models.py", line 1086, i
n agenerate
    raise exceptions[0]
  File "D:\心宇未来\ai-teacher-nex
us\tcagents\Lib\site-packages\
langchain_core\language_models
\chat_models.py", line 1339, i
n _agenerate_with_cache
    result = await self._agene
rate(
             ^^^^^^^^^^^^^^^^^
^^^^^
        messages, stop=stop, r
un_manager=run_manager, **kwar
gs
        ^^^^^^^^^^^^^^^^^^^^^^
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
^^
    )
    ^
  File "D:\心宇未来\ai-teacher-nex
us\tcagents\Lib\site-packages\
langchain_openai\chat_models\b
ase.py", line 1628, in _agener
ate
    raise e
  File "D:\心宇未来\ai-teacher-nex
us\tcagents\Lib\site-packages\
langchain_openai\chat_models\b
ase.py", line 1621, in _agener
ate
    raw_response = await self.
async_client.with_raw_response
.create(
                   ^^^^^^^^^^^
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
^^^^^^^^
        **payload
        ^^^^^^^^^
    )
    ^
  File "D:\心宇未来\ai-teacher-nex
us\tcagents\Lib\site-packages\
openai\_legacy_response.py", l
ine 381, in wrapped
    return cast(LegacyAPIRespo
nse[R], await func(*args, **kw
args))
                              
              ~~~~^^^^^^^^^^^^
^^^^^
  File "D:\心宇未来\ai-teacher-nex
us\tcagents\Lib\site-packages\
openai\_utils\_utils.py", line
 286, in wrapper
    return func(*args, **kwarg
s)
TypeError: AsyncCompletions.cr
eate() got an unexpected keywo
rd argument 'language'

During handling of the above e
xception, another exception oc
curred:

Traceback (most recent call la
st):
  File "D:\心宇未来\ai-teacher-nex
us\tcagents\Lib\site-packages\
gpt_researcher\actions\agent_c
reator.py", line 56, in handle
_json_error
    agent_dict = json_repair.l
oads(response)
  File "D:\心宇未来\ai-teacher-nex
us\tcagents\Lib\site-packages\
json_repair\json_repair.py", l
ine 131, in loads
    return repair_json(
        json_str=json_str,
    ...<4 lines>...
        strict=strict,
    )
  File "D:\心宇未来\ai-teacher-nex
us\tcagents\Lib\site-packages\
json_repair\json_repair.py", l
ine 94, in repair_json
    parsed_json = json.load(js
on_fd) if json_fd else json.lo
ads(json_str)
                              
                       ~~~~~~~
~~~^^^^^^^^^^
  File "D:\Python313\Lib\json\
__init__.py", line 339, in loa
ds
    raise TypeError(f'the JSON
 object must be str, bytes or 
bytearray, '
                    f'not {s._
_class__.__name__}')
TypeError: the JSON object mus
t be str, bytes or bytearray, 
not NoneType

During handling of the above e
xception, another exception oc
curred:

Traceback (most recent call la
st):
  File "D:\心宇未来\ai-teacher-nex
us\debug_chinese.py", line 14,
 in test_chinese_research
    await researcher.conduct_r
esearch()
  File "D:\心宇未来\ai-teacher-nex
us\tcagents\Lib\site-packages\
gpt_researcher\agent.py", line
 306, in conduct_research
    self.agent, self.role = aw
ait choose_agent(
                            ^^
^^^^^^^^^^^^^^^^^
    ...<8 lines>...
    )
    ^
  File "D:\心宇未来\ai-teacher-nex
us\tcagents\Lib\site-packages\
gpt_researcher\actions\agent_c
reator.py", line 51, in choose
_agent
    return await handle_json_e
rror(response)
           ^^^^^^^^^^^^^^^^^^^
^^^^^^^^^^^^^^
  File "D:\心宇未来\ai-teacher-nex
us\tcagents\Lib\site-packages\
gpt_researcher\actions\agent_c
reator.py", line 60, in handle
_json_error
    print(f"\u26a0\ufe0f Error
 in reading JSON and failed to
 repair with json_repair: {e}"
)
    ~~~~~^^^^^^^^^^^^^^^^^^^^^
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'gbk' code
c can't encode character '\u26
a0' in position 0: illegal mul
tibyte sequence
Testing query: 你是谁 with language='chinese'
Conducting research...
Error: 'gbk' codec can't encode character '\u26a0' in position 0: illegal multibyte sequence
